<%- contentFor('body') %>
<div>
    <div class="main__container">
        <div class="main__header">
            <p class="main__heading">File <%= action %> Successfully!</p>
        </div>

        <div class="main">
            <div class="main__icon">
                <i class="fas fa-folder-open icon-folder"></i>
            </div>

            <div class="main__file-name">
                <p class="filename">file-17733737373.en</p>
                <p class="filesize">201 Bytes</p>
            </div>

            <div class="main__key-encrypt">
                <div class="passToDecrypt-container">
                    <!-- <p class="key-label">Please remember the key below (in green), it will be required when decrypting your file</p>
                    <p class="text-success key-encrypt">Password</p> -->
                </div>
            </div>

            <div class="main__button-container">
                <div class="main__button">
                    <div class="button-container">
                        <a href="/encrypt-file" class="btn-link">
                            <button class="btn btn-primary btn-goback">
                                <i class="fas fa-long-arrow-alt-left"></i>
                                <span>Go back</span>
                            </button>
                        </a>
                    </div>
                    <div class="button-container">
                        <a href='/encrypt-file/download?filename=<%= filename %>' class="btn-link">
                            <button class="btn btn-success btn-download">
                                <i class="fas fa-long-arrow-alt-down"></i>
                                <span>Download</span>
                            </button>
                        </a>
                    </div>
                </div>
                <div class="span-container">
                    <span class="span-notify">After you download the file, it will be deleted from our servers immediately.</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const passToDecrypt = JSON.parse('<%- JSON.stringify(key) %>');
    const filename = JSON.parse('<%- JSON.stringify(filename) %>');
    let filesize = JSON.parse('<%- JSON.stringify(filesize) %>');

    const filenameElement = document.querySelector('.filename');
    const fileSizeElement = document.querySelector('.filesize');
    const size = +filesize < 1024 ? filesize + ' B' : (filesize/1024).toFixed(2) + ' MB';

    filenameElement.innerHTML = filename;
    fileSizeElement.innerHTML = size;

    if (passToDecrypt) {
        const passToDecryptElement = document.querySelector('.passToDecrypt-container');
        passToDecryptElement.innerHTML = `
            <p class="key-label">Please remember the key below (in green), it will be required when decrypting your file</p>
            <p class="text-success key-encrypt">${passToDecrypt}</p>
        `;
    }
</script>